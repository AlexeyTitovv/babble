{{#menu-panel visible=visible}}
  <section class="babble-chat">
      <div class="babble-title-wrapper">
        <div class="babble-title">
          {{#if viewingChat}}
            <h4 class="babble-group-title">{{topic.title}}</h4>
            <i class="fa fa-eye" title="{{i18n 'babble.topic_visibility_tooltip' groupNames=topic.details.group_names}}"></i>
            {{#if multipleTopicsAvailable}}
              <button {{action 'viewTopics' bubbles=false}} class="babble-context-toggle for-topics">
                <i class="fa fa-exchange" title="{{i18n 'babble.view_topics_tooltip'}}"></i>
              </button>
            {{/if}}
          {{else}}
            <button {{action 'viewChat' bubbles=false}} class="babble-context-toggle for-chat">
              <i class="fa fa-chevron-left" title="{{i18n 'babble.view_chat_tooltip'}}"></i>
            </button>
            <h4 class="babble-topic-switcher-title">{{i18n 'babble.select_topic'}}</h4>
          {{/if}}
        </div>
      </div>

    {{#if viewingChat}}
      <ul class="babble-posts">
        {{#unless topic.postStream.posts}}
          <li class="babble-empty-topic-message">{{i18n 'babble.empty_topic_message'}}</li>
        {{/unless}}
        {{#each post in topic.postStream.posts}}
          {{babble-post post=post topic=topic}}
        {{/each}}
        {{conditional-loading-spinner condition=topic.postStream.loadingBelow}}
      </ul>
      {{babble-composer topic=topic}}
    {{else}}
      <ul class="babble-available-topics">
        {{#each t in availableTopics}}
          <li class="babble-available-topic">
            <div>{{t.title}}</div>
            <div>{{t.details.group_names}}</div>
          </li>
        {{/each}}
      </ul>
    {{/if}}
  </section>
{{/menu-panel}}
