{{post-gap post=post postStream=postStream before="true"}}

<article {{bind-attr class=":boxed via_email" id="postElementId" data-post-id="id" data-user-id="user_id"}}>
  <div class='row'>

    <div class='topic-avatar'>
      <div class="contents">
        {{#if userDeleted}}
          <i class="fa fa-trash-o deleted-user-avatar"></i>
        {{else}}
          {{raw "post/poster-avatar" post=this classNames="main-avatar"}}
        {{/if}}
      </div>
    </div>

    <div class='topic-body'>
      <div class='topic-meta-data'>
        {{poster-name post=post}}
        <div class='post-info'>
          <a class='post-date' {{bind-attr href="shareUrl" data-share-url="shareUrl" data-post-number="post_number"}}>{{age-with-tooltip post.created_at}}</a>
        </div>
        <div {{bind-attr class=":read-state read"}} title="{{i18n 'post.unread'}}">{{fa-icon "circle"}}</div>
      </div>

      <!-- keep the classes here in sync with composer.hbs -->
      <div {{bind-attr class="showUserReplyTab:avoid-tab view.repliesShown::contents :regular view.extraClass"}}>
        <div class='cooked'>
          {{{post.cooked}}}
        </div>
        {{#if post.cooked_hidden}}
          <a href {{action "expandHidden" this}}>{{i18n 'post.show_hidden'}}</a>
        {{/if}}
      </div>

      {{discourse-action-history post=post}}
    </div>
  </div>

</article>

{{post-gap post=post postStream=postStream before="false"}}
